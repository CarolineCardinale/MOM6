<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MOM6: mom_tracer_registry Module Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MOM6
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d1/d35/namespacemom__tracer__registry.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Types</a> &#124;
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">mom_tracer_registry Module Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This module contains the <a class="el" href="../../df/df4/structmom__tracer__registry_1_1tracer__registry__type.html" title="Type to carry basic tracer information. ">tracer_registry_type</a> and the subroutines that handle registration of tracers and related subroutines. The primary subroutine, register_tracer, is called to indicate the tracers advected and diffused.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Types</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">type &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df4/structmom__tracer__registry_1_1tracer__registry__type.html">tracer_registry_type</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type to carry basic tracer information.  <a href="../../df/df4/structmom__tracer__registry_1_1tracer__registry__type.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">type &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/db1/structmom__tracer__registry_1_1tracer__type.html">tracer_type</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The tracer type.  <a href="../../d2/db1/structmom__tracer__registry_1_1tracer__type.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a6a753792521378d63e3dd5ca73f3574a"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d35/namespacemom__tracer__registry.html#a6a753792521378d63e3dd5ca73f3574a">register_tracer</a> (tr1, tr_desc, param_file, HI, GV, Reg, tr_desc_ptr, ad_x, ad_y, df_x, df_y, OBC_inflow, OBC_in_u, OBC_in_v, ad_2d_x, ad_2d_y, df_2d_x, df_2d_y, advection_xy)</td></tr>
<tr class="memdesc:a6a753792521378d63e3dd5ca73f3574a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This subroutine registers a tracer to be advected and laterally diffused.  <a href="#a6a753792521378d63e3dd5ca73f3574a">More...</a><br /></td></tr>
<tr class="separator:a6a753792521378d63e3dd5ca73f3574a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9889848c1f3801951b0c79cace52e8d"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d35/namespacemom__tracer__registry.html#af9889848c1f3801951b0c79cace52e8d">lock_tracer_registry</a> (Reg)</td></tr>
<tr class="memdesc:af9889848c1f3801951b0c79cace52e8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This subroutine locks the tracer registry to prevent the addition of more tracers. After locked=.true., can then register common diagnostics.  <a href="#af9889848c1f3801951b0c79cace52e8d">More...</a><br /></td></tr>
<tr class="separator:af9889848c1f3801951b0c79cace52e8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6210b799ee25a114d4b87bdfaa6d0c7a"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d35/namespacemom__tracer__registry.html#a6210b799ee25a114d4b87bdfaa6d0c7a">add_tracer_obc_values</a> (name, Reg, OBC_inflow, OBC_in_u, OBC_in_v)</td></tr>
<tr class="memdesc:a6210b799ee25a114d4b87bdfaa6d0c7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This subroutine adds open boundary condition concentrations for a tracer that has previously been registered by a call to register_tracer.  <a href="#a6210b799ee25a114d4b87bdfaa6d0c7a">More...</a><br /></td></tr>
<tr class="separator:a6210b799ee25a114d4b87bdfaa6d0c7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac008525fee272a225a19998ae437b5bf"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d35/namespacemom__tracer__registry.html#ac008525fee272a225a19998ae437b5bf">add_tracer_diagnostics</a> (name, Reg, ad_x, ad_y, df_x, df_y, ad_2d_x, ad_2d_y, df_2d_x, df_2d_y, advection_xy)</td></tr>
<tr class="memdesc:ac008525fee272a225a19998ae437b5bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">This subroutine adds diagnostic arrays for a tracer that has previously been registered by a call to register_tracer.  <a href="#ac008525fee272a225a19998ae437b5bf">More...</a><br /></td></tr>
<tr class="separator:ac008525fee272a225a19998ae437b5bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad350bb834bb3dcfd6e603bb136bd8098"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d35/namespacemom__tracer__registry.html#ad350bb834bb3dcfd6e603bb136bd8098">mom_tracer_chksum</a> (mesg, Tr, ntr, G)</td></tr>
<tr class="memdesc:ad350bb834bb3dcfd6e603bb136bd8098"><td class="mdescLeft">&#160;</td><td class="mdescRight">This subroutine writes out chksums for thermodynamic state variables.  <a href="#ad350bb834bb3dcfd6e603bb136bd8098">More...</a><br /></td></tr>
<tr class="separator:ad350bb834bb3dcfd6e603bb136bd8098"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a452937bf1f9d01a47d1a80793e317b33"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d35/namespacemom__tracer__registry.html#a452937bf1f9d01a47d1a80793e317b33">tracer_registry_init</a> (param_file, Reg)</td></tr>
<tr class="memdesc:a452937bf1f9d01a47d1a80793e317b33"><td class="mdescLeft">&#160;</td><td class="mdescRight">This routine include declares and sets the variable "version".  <a href="#a452937bf1f9d01a47d1a80793e317b33">More...</a><br /></td></tr>
<tr class="separator:a452937bf1f9d01a47d1a80793e317b33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaca7f6bcdb5f1d8cb247e24719d37df9"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d35/namespacemom__tracer__registry.html#aaca7f6bcdb5f1d8cb247e24719d37df9">tracer_registry_end</a> (Reg)</td></tr>
<tr class="memdesc:aaca7f6bcdb5f1d8cb247e24719d37df9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This routine closes the tracer registry module.  <a href="#aaca7f6bcdb5f1d8cb247e24719d37df9">More...</a><br /></td></tr>
<tr class="separator:aaca7f6bcdb5f1d8cb247e24719d37df9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This module contains the <a class="el" href="../../df/df4/structmom__tracer__registry_1_1tracer__registry__type.html" title="Type to carry basic tracer information. ">tracer_registry_type</a> and the subroutines that handle registration of tracers and related subroutines. The primary subroutine, register_tracer, is called to indicate the tracers advected and diffused. </p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="ac008525fee272a225a19998ae437b5bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac008525fee272a225a19998ae437b5bf">&sect;&nbsp;</a></span>add_tracer_diagnostics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public mom_tracer_registry::add_tracer_diagnostics </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d60/version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="../../df/df4/structmom__tracer__registry_1_1tracer__registry__type.html">tracer_registry_type</a>), pointer&#160;</td>
          <td class="paramname"><em>Reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:,:), optional, pointer&#160;</td>
          <td class="paramname"><em>ad_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:,:), optional, pointer&#160;</td>
          <td class="paramname"><em>ad_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:,:), optional, pointer&#160;</td>
          <td class="paramname"><em>df_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:,:), optional, pointer&#160;</td>
          <td class="paramname"><em>df_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:), optional, pointer&#160;</td>
          <td class="paramname"><em>ad_2d_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:), optional, pointer&#160;</td>
          <td class="paramname"><em>ad_2d_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:), optional, pointer&#160;</td>
          <td class="paramname"><em>df_2d_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:), optional, pointer&#160;</td>
          <td class="paramname"><em>df_2d_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:,:), optional, pointer&#160;</td>
          <td class="paramname"><em>advection_xy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This subroutine adds diagnostic arrays for a tracer that has previously been registered by a call to register_tracer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>name of the tracer for which the diagnostic points</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">reg</td><td>pointer to the tracer registry</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">ad_x</td><td>diagnostic x-advective flux (CONC m3/s or CONC*kg/s)</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">ad_y</td><td>diagnostic y-advective flux (CONC m3/s or CONC*kg/s)</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">df_x</td><td>diagnostic x-diffusive flux (CONC m3/s or CONC*kg/s)</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">df_y</td><td>diagnostic y-diffusive flux (CONC m3/s or CONC*kg/s)</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">ad_2d_x</td><td>vert sum of diagnostic x-advect flux (CONC m3/s or CONC*kg/s)</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">ad_2d_y</td><td>vert sum of diagnostic y-advect flux (CONC m3/s or CONC*kg/s)</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">df_2d_x</td><td>vert sum of diagnostic x-diffuse flux (CONC m3/s or CONC*kg/s)</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">df_2d_y</td><td>vert sum of diagnostic y-diffuse flux (CONC m3/s or CONC*kg/s)</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">advection_xy</td><td>convergence of lateral advective tracer fluxes </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d9/d8f/MOM__tracer__registry_8F90_source.html#l00208">208</a> of file <a class="el" href="../../d9/d8f/MOM__tracer__registry_8F90_source.html">MOM_tracer_registry.F90</a>.</p>

<p>References <a class="el" href="../../d5/d48/MOM__error__handler_8F90_source.html#l00072">mom_error_handler::mom_error()</a>.</p>

<p>Referenced by <a class="el" href="../../d3/d55/advection__test__tracer_8F90_source.html#l00231">advection_test_tracer::initialize_advection_test_tracer()</a>, <a class="el" href="../../df/dfe/boundary__impulse__tracer_8F90_source.html#l00165">boundary_impulse_tracer::initialize_boundary_impulse_tracer()</a>, <a class="el" href="../../d5/d64/DOME__tracer_8F90_source.html#l00211">dome_tracer::initialize_dome_tracer()</a>, <a class="el" href="../../d1/da8/dye__example_8F90_source.html#l00274">regional_dyes::initialize_dye_tracer()</a>, <a class="el" href="../../d9/d5a/ideal__age__example_8F90_source.html#l00283">ideal_age_example::initialize_ideal_age_tracer()</a>, <a class="el" href="../../d7/d45/ISOMIP__tracer_8F90_source.html#l00172">isomip_tracer::initialize_isomip_tracer()</a>, <a class="el" href="../../d1/d2b/MOM__OCMIP2__CFC_8F90_source.html#l00371">mom_ocmip2_cfc::initialize_ocmip2_cfc()</a>, <a class="el" href="../../d5/d65/oil__tracer_8F90_source.html#l00279">oil_tracer::initialize_oil_tracer()</a>, <a class="el" href="../../dd/d9f/pseudo__salt__tracer_8F90_source.html#l00203">pseudo_salt_tracer::initialize_pseudo_salt_tracer()</a>, and <a class="el" href="../../da/d4f/tracer__example_8F90_source.html#l00208">user_tracer_example::user_initialize_tracer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span>              :: name<span class="comment">         !&lt; name of the tracer for which the diagnostic points</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keywordtype">type</span>(tracer_registry_type), <span class="keywordtype">pointer</span>       :: reg<span class="comment">          !&lt; pointer to the tracer registry</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">dimension(:,:,:)</span>, <span class="keywordtype">pointer</span>, <span class="keywordtype">optional</span> :: ad_x<span class="comment">         !&lt; diagnostic x-advective flux (CONC m3/s or CONC*kg/s) </span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">dimension(:,:,:)</span>, <span class="keywordtype">pointer</span>, <span class="keywordtype">optional</span> :: ad_y<span class="comment">         !&lt; diagnostic y-advective flux (CONC m3/s or CONC*kg/s)</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">dimension(:,:,:)</span>, <span class="keywordtype">pointer</span>, <span class="keywordtype">optional</span> :: df_x<span class="comment">         !&lt; diagnostic x-diffusive flux (CONC m3/s or CONC*kg/s)</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">dimension(:,:,:)</span>, <span class="keywordtype">pointer</span>, <span class="keywordtype">optional</span> :: df_y<span class="comment">         !&lt; diagnostic y-diffusive flux (CONC m3/s or CONC*kg/s)</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">dimension(:,:)</span>,   <span class="keywordtype">pointer</span>, <span class="keywordtype">optional</span> :: ad_2d_x<span class="comment">      !&lt; vert sum of diagnostic x-advect flux (CONC m3/s or CONC*kg/s) </span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">dimension(:,:)</span>,   <span class="keywordtype">pointer</span>, <span class="keywordtype">optional</span> :: ad_2d_y<span class="comment">      !&lt; vert sum of diagnostic y-advect flux (CONC m3/s or CONC*kg/s)</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">dimension(:,:)</span>,   <span class="keywordtype">pointer</span>, <span class="keywordtype">optional</span> :: df_2d_x<span class="comment">      !&lt; vert sum of diagnostic x-diffuse flux (CONC m3/s or CONC*kg/s)</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">dimension(:,:)</span>,   <span class="keywordtype">pointer</span>, <span class="keywordtype">optional</span> :: df_2d_y<span class="comment">      !&lt; vert sum of diagnostic y-diffuse flux (CONC m3/s or CONC*kg/s) </span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">dimension(:,:,:)</span>, <span class="keywordtype">pointer</span>, <span class="keywordtype">optional</span> :: advection_xy<span class="comment"> !&lt; convergence of lateral advective tracer fluxes  </span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordtype">integer</span> :: m</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordflow">if</span> (.not. <span class="keyword">associated</span>(reg)) <span class="keyword">call </span>mom_error(fatal, <span class="stringliteral">&quot;add_tracer_diagnostics: &quot;</span>// &amp;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;       <span class="stringliteral">&quot;register_tracer must be called before add_tracer_diagnostics&quot;</span>)</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordflow">do</span> m=1,reg%ntr ; <span class="keywordflow">if</span> (reg%Tr(m)%name == trim(name)) <span class="keywordflow">exit</span> ;<span class="keywordflow"> enddo</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordflow">if</span> (m &lt;= reg%ntr) <span class="keywordflow">then</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(ad_x)) <span class="keywordflow">then</span> ; <span class="keywordflow">if</span> (<span class="keyword">associated</span>(ad_x)) reg%Tr(m)%ad_x =&gt; ad_x ;<span class="keywordflow"> endif</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(ad_y)) <span class="keywordflow">then</span> ; <span class="keywordflow">if</span> (<span class="keyword">associated</span>(ad_y)) reg%Tr(m)%ad_y =&gt; ad_y ;<span class="keywordflow"> endif</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(df_x)) <span class="keywordflow">then</span> ; <span class="keywordflow">if</span> (<span class="keyword">associated</span>(df_x)) reg%Tr(m)%df_x =&gt; df_x ;<span class="keywordflow"> endif</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(df_y)) <span class="keywordflow">then</span> ; <span class="keywordflow">if</span> (<span class="keyword">associated</span>(df_y)) reg%Tr(m)%df_y =&gt; df_y ;<span class="keywordflow"> endif</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(ad_2d_x)) <span class="keywordflow">then</span> ; <span class="keywordflow">if</span> (<span class="keyword">associated</span>(ad_2d_x)) reg%Tr(m)%ad2d_x =&gt; ad_2d_x ;<span class="keywordflow"> endif</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(ad_2d_y)) <span class="keywordflow">then</span> ; <span class="keywordflow">if</span> (<span class="keyword">associated</span>(ad_2d_y)) reg%Tr(m)%ad2d_y =&gt; ad_2d_y ;<span class="keywordflow"> endif</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(df_2d_x)) <span class="keywordflow">then</span> ; <span class="keywordflow">if</span> (<span class="keyword">associated</span>(df_2d_x)) reg%Tr(m)%df2d_x =&gt; df_2d_x ;<span class="keywordflow"> endif</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(df_2d_y)) <span class="keywordflow">then</span> ; <span class="keywordflow">if</span> (<span class="keyword">associated</span>(df_2d_y)) reg%Tr(m)%df2d_y =&gt; df_2d_y ;<span class="keywordflow"> endif</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(advection_xy)) <span class="keywordflow">then</span> ; <span class="keywordflow">if</span> (<span class="keyword">associated</span>(advection_xy)) reg%Tr(m)%advection_xy =&gt; advection_xy ;<span class="keywordflow"> endif</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keyword">call </span>mom_error(fatal, <span class="stringliteral">&quot;MOM_tracer: register_tracer must be called for &quot;</span>//&amp;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;             trim(name)//<span class="stringliteral">&quot; before add_tracer_diagnostics is called for it.&quot;</span>)</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="keywordflow">  endif</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div></div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d1/d35/namespacemom__tracer__registry_ac008525fee272a225a19998ae437b5bf_cgraph.svg" width="554" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d1/d35/namespacemom__tracer__registry_ac008525fee272a225a19998ae437b5bf_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a6210b799ee25a114d4b87bdfaa6d0c7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6210b799ee25a114d4b87bdfaa6d0c7a">&sect;&nbsp;</a></span>add_tracer_obc_values()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public mom_tracer_registry::add_tracer_obc_values </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d60/version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="../../df/df4/structmom__tracer__registry_1_1tracer__registry__type.html">tracer_registry_type</a>), pointer&#160;</td>
          <td class="paramname"><em>Reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(in), optional&#160;</td>
          <td class="paramname"><em>OBC_inflow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:,:), optional, pointer&#160;</td>
          <td class="paramname"><em>OBC_in_u</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:,:), optional, pointer&#160;</td>
          <td class="paramname"><em>OBC_in_v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This subroutine adds open boundary condition concentrations for a tracer that has previously been registered by a call to register_tracer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>tracer name for which the diagnostic points</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">reg</td><td>pointer to the tracer registry</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">obc_inflow</td><td>tracer value for all inflows via the OBC for which OBC_in_u or OBC_in_v are not specified (same units as tracer CONC)</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">obc_in_u</td><td>tracer at inflows through u-face of tracer cells (same units as tracer CONC)</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">obc_in_v</td><td>tracer at inflows through v-face of tracer cells (same units as tracer CONC) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d9/d8f/MOM__tracer__registry_8F90_source.html#l00172">172</a> of file <a class="el" href="../../d9/d8f/MOM__tracer__registry_8F90_source.html">MOM_tracer_registry.F90</a>.</p>

<p>References <a class="el" href="../../d5/d48/MOM__error__handler_8F90_source.html#l00072">mom_error_handler::mom_error()</a>.</p>

<p>Referenced by <a class="el" href="../../d5/d64/DOME__tracer_8F90_source.html#l00211">dome_tracer::initialize_dome_tracer()</a>, and <a class="el" href="../../da/d4f/tracer__example_8F90_source.html#l00208">user_tracer_example::user_initialize_tracer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span>               :: name<span class="comment">        !&lt; tracer name for which the diagnostic points </span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordtype">type</span>(tracer_registry_type), <span class="keywordtype">pointer</span>        :: reg<span class="comment">         !&lt; pointer to the tracer registry</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">intent(in)</span>, <span class="keywordtype">optional</span>                 :: obc_inflow<span class="comment">  !&lt; tracer value for all inflows via the OBC</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">                                                            !! for which OBC_in_u or OBC_in_v are</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">                                                            !! not specified (same units as tracer CONC) </span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">pointer</span>, <span class="keywordtype">dimension(:,:,:)</span>, <span class="keywordtype">optional</span>  :: obc_in_u<span class="comment">    !&lt; tracer at inflows through u-face of tracer cells</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">                                                            !! (same units as tracer CONC)</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">pointer</span>, <span class="keywordtype">dimension(:,:,:)</span>, <span class="keywordtype">optional</span>  :: obc_in_v<span class="comment">    !&lt; tracer at inflows through v-face of tracer cells</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">                                                            !! (same units as tracer CONC)</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="keywordtype">integer</span> :: m</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordflow">if</span> (.not. <span class="keyword">associated</span>(reg)) <span class="keyword">call </span>mom_error(fatal, <span class="stringliteral">&quot;add_tracer_OBC_values :&quot;</span>// &amp;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;       <span class="stringliteral">&quot;register_tracer must be called before add_tracer_OBC_values&quot;</span>)</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="keywordflow">do</span> m=1,reg%ntr ; <span class="keywordflow">if</span> (reg%Tr(m)%name == trim(name)) <span class="keywordflow">exit</span> ;<span class="keywordflow"> enddo</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="keywordflow">if</span> (m &lt;= reg%ntr) <span class="keywordflow">then</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(obc_inflow)) reg%Tr(m)%OBC_inflow_conc = obc_inflow</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(obc_in_u)) <span class="keywordflow">then</span> ; <span class="keywordflow">if</span> (<span class="keyword">associated</span>(obc_in_u)) &amp;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                                      reg%Tr(m)%OBC_in_u =&gt; obc_in_u ;<span class="keywordflow"> endif</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(obc_in_v)) <span class="keywordflow">then</span> ; <span class="keywordflow">if</span> (<span class="keyword">associated</span>(obc_in_v)) &amp;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                                      reg%Tr(m)%OBC_in_v =&gt; obc_in_v ;<span class="keywordflow"> endif</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keyword">call </span>mom_error(fatal, <span class="stringliteral">&quot;MOM_tracer: register_tracer must be called for &quot;</span>//&amp;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;             trim(name)//<span class="stringliteral">&quot; before add_tracer_OBC_values is called for it.&quot;</span>)</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="keywordflow">  endif</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div></div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d1/d35/namespacemom__tracer__registry_a6210b799ee25a114d4b87bdfaa6d0c7a_cgraph.svg" width="554" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d1/d35/namespacemom__tracer__registry_a6210b799ee25a114d4b87bdfaa6d0c7a_icgraph.svg" width="372" height="118"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af9889848c1f3801951b0c79cace52e8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9889848c1f3801951b0c79cace52e8d">&sect;&nbsp;</a></span>lock_tracer_registry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public mom_tracer_registry::lock_tracer_registry </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="../../df/df4/structmom__tracer__registry_1_1tracer__registry__type.html">tracer_registry_type</a>), pointer&#160;</td>
          <td class="paramname"><em>Reg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This subroutine locks the tracer registry to prevent the addition of more tracers. After locked=.true., can then register common diagnostics. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reg</td><td>pointer to the tracer registry </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d9/d8f/MOM__tracer__registry_8F90_source.html#l00159">159</a> of file <a class="el" href="../../d9/d8f/MOM__tracer__registry_8F90_source.html">MOM_tracer_registry.F90</a>.</p>

<p>References <a class="el" href="../../d5/d48/MOM__error__handler_8F90_source.html#l00072">mom_error_handler::mom_error()</a>.</p>
<div class="fragment"><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keywordtype">type</span>(tracer_registry_type), <span class="keywordtype">pointer</span>    :: reg<span class="comment">    !&lt; pointer to the tracer registry</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keywordflow">if</span> (.not. <span class="keyword">associated</span>(reg)) <span class="keyword">call </span>mom_error(warning, &amp;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="stringliteral">&quot;lock_tracer_registry called with an unassocaited registry.&quot;</span>)</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  reg%locked = .true.</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div></div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d1/d35/namespacemom__tracer__registry_af9889848c1f3801951b0c79cace52e8d_cgraph.svg" width="534" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad350bb834bb3dcfd6e603bb136bd8098"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad350bb834bb3dcfd6e603bb136bd8098">&sect;&nbsp;</a></span>mom_tracer_chksum()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public mom_tracer_registry::mom_tracer_chksum </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d60/version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>mesg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="../../d2/db1/structmom__tracer__registry_1_1tracer__type.html">tracer_type</a>), dimension(:), intent(in)&#160;</td>
          <td class="paramname"><em>Tr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ntr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(ocean_grid_type), intent(in)&#160;</td>
          <td class="paramname"><em>G</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This subroutine writes out chksums for thermodynamic state variables. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mesg</td><td>message that appears on the chksum lines</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tr</td><td>array of all of registered tracers</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ntr</td><td>number of registered tracers</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">g</td><td>ocean grid structure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d9/d8f/MOM__tracer__registry_8F90_source.html#l00251">251</a> of file <a class="el" href="../../d9/d8f/MOM__tracer__registry_8F90_source.html">MOM_tracer_registry.F90</a>.</p>

<p>Referenced by <a class="el" href="../../d7/dbb/MOM__tracer__hor__diff_8F90_source.html#l00088">mom_tracer_hor_diff::tracer_hordiff()</a>.</p>
<div class="fragment"><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordtype">character(len=*)</span>,         <span class="keywordtype">intent(in)</span> :: mesg<span class="comment">   !&lt; message that appears on the chksum lines</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordtype">type</span>(tracer_type),        <span class="keywordtype">intent(in)</span> :: tr(:)<span class="comment">  !&lt; array of all of registered tracers</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="keywordtype">integer</span>,                  <span class="keywordtype">intent(in)</span> :: ntr<span class="comment">    !&lt; number of registered tracers</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordtype">type</span>(ocean_grid_type),    <span class="keywordtype">intent(in)</span> :: g<span class="comment">      !&lt; ocean grid structure </span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keywordtype">integer</span> :: is, ie, js, je, nz, m</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  is = g%isc ; ie = g%iec ; js = g%jsc ; je = g%jec ; nz = g%ke</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keywordflow">do</span> m=1,ntr</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keyword">call </span>hchksum(tr(m)%t, mesg//trim(tr(m)%name), g%HI)</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="keywordflow">  enddo</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div></div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d1/d35/namespacemom__tracer__registry_ad350bb834bb3dcfd6e603bb136bd8098_icgraph.svg" width="352" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a6a753792521378d63e3dd5ca73f3574a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a753792521378d63e3dd5ca73f3574a">&sect;&nbsp;</a></span>register_tracer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public mom_tracer_registry::register_tracer </td>
          <td>(</td>
          <td class="paramtype">real, dimension(szi_(hi),szj_(hi),szk_(gv)), target&#160;</td>
          <td class="paramname"><em>tr1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(vardesc), intent(in)&#160;</td>
          <td class="paramname"><em>tr_desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(param_file_type), intent(in)&#160;</td>
          <td class="paramname"><em>param_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(hor_index_type), intent(in)&#160;</td>
          <td class="paramname"><em>HI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(verticalgrid_type), intent(in)&#160;</td>
          <td class="paramname"><em>GV</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="../../df/df4/structmom__tracer__registry_1_1tracer__registry__type.html">tracer_registry_type</a>), pointer&#160;</td>
          <td class="paramname"><em>Reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(vardesc), optional, target&#160;</td>
          <td class="paramname"><em>tr_desc_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:,:), optional, pointer&#160;</td>
          <td class="paramname"><em>ad_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:,:), optional, pointer&#160;</td>
          <td class="paramname"><em>ad_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:,:), optional, pointer&#160;</td>
          <td class="paramname"><em>df_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:,:), optional, pointer&#160;</td>
          <td class="paramname"><em>df_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(in), optional&#160;</td>
          <td class="paramname"><em>OBC_inflow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:,:), optional, pointer&#160;</td>
          <td class="paramname"><em>OBC_in_u</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:,:), optional, pointer&#160;</td>
          <td class="paramname"><em>OBC_in_v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:), optional, pointer&#160;</td>
          <td class="paramname"><em>ad_2d_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:), optional, pointer&#160;</td>
          <td class="paramname"><em>ad_2d_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:), optional, pointer&#160;</td>
          <td class="paramname"><em>df_2d_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:), optional, pointer&#160;</td>
          <td class="paramname"><em>df_2d_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:,:), optional, pointer&#160;</td>
          <td class="paramname"><em>advection_xy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This subroutine registers a tracer to be advected and laterally diffused. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hi</td><td>horizontal index type</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">gv</td><td>ocean vertical grid structure</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">tr1</td><td>pointer to the tracer (concentration units)</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tr_desc</td><td>metadata about the tracer</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">param_file</td><td>file to parse for model parameter values</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">reg</td><td>pointer to the tracer registry</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">tr_desc_ptr</td><td>A target that can be used to set a pointer to the stored value of trtr_desc. This target must be an enduring part of the control structure, because the tracer registry will use this memory, but it also means that any updates to this structure in the calling module will be available subsequently to the tracer registry.</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">ad_x</td><td>diagnostic x-advective flux (CONC m3/s or CONC*kg/s)</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">ad_y</td><td>diagnostic y-advective flux (CONC m3/s or CONC*kg/s)</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">df_x</td><td>diagnostic x-diffusive flux (CONC m3/s or CONC*kg/s)</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">df_y</td><td>diagnostic y-diffusive flux (CONC m3/s or CONC*kg/s)</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">obc_inflow</td><td>the tracer for all inflows via OBC for which OBC_in_u or OBC_in_v are not specified (units of tracer CONC)</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">obc_in_u</td><td>tracer at inflows through u-faces of tracer cells (units of tracer CONC)</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">obc_in_v</td><td>tracer at inflows through v-faces of tracer cells (units of tracer CONC)</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">ad_2d_x</td><td>vert sum of diagnostic x-advect flux (CONC m3/s or CONC*kg/s)</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">ad_2d_y</td><td>vert sum of diagnostic y-advect flux (CONC m3/s or CONC*kg/s)</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">df_2d_x</td><td>vert sum of diagnostic x-diffuse flux (CONC m3/s or CONC*kg/s)</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">df_2d_y</td><td>vert sum of diagnostic y-diffuse flux (CONC m3/s or CONC*kg/s)</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">advection_xy</td><td>convergence of lateral advective tracer fluxes </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d9/d8f/MOM__tracer__registry_8F90_source.html#l00079">79</a> of file <a class="el" href="../../d9/d8f/MOM__tracer__registry_8F90_source.html">MOM_tracer_registry.F90</a>.</p>

<p>References <a class="el" href="../../d5/d48/MOM__error__handler_8F90_source.html#l00072">mom_error_handler::mom_error()</a>, <a class="el" href="../../d7/dde/MOM__io_8F90_source.html#l00663">mom_io::query_vardesc()</a>, and <a class="el" href="../../d9/d8f/MOM__tracer__registry_8F90_source.html#l00268">tracer_registry_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keywordtype">type</span>(hor_index_type),           <span class="keywordtype">intent(in)</span>    :: hi<span class="comment">           !&lt; horizontal index type </span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keywordtype">type</span>(verticalgrid_type),        <span class="keywordtype">intent(in)</span>    :: gv<span class="comment">           !&lt; ocean vertical grid structure </span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">dimension(SZI_(HI),SZJ_(HI),SZK_(GV))</span>, <span class="keywordtype">target</span> :: tr1<span class="comment">    !&lt; pointer to the tracer (concentration units)</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keywordtype">type</span>(vardesc),         <span class="keywordtype">intent(in)</span>             :: tr_desc<span class="comment">      !&lt; metadata about the tracer</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keywordtype">type</span>(param_file_type), <span class="keywordtype">intent(in)</span>             :: param_file<span class="comment">   !&lt; file to parse for  model parameter values</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keywordtype">type</span>(tracer_registry_type), <span class="keywordtype">pointer</span>           :: reg<span class="comment">          !&lt; pointer to the tracer registry</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordtype">type</span>(vardesc), <span class="keywordtype">target</span>, <span class="keywordtype">optional</span>               :: tr_desc_ptr<span class="comment">  !&lt; A target that can be used to set a pointer to the</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">                                                                !! stored value of tr%tr_desc.  This target must be an</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">                                                                !! enduring part of the control structure, because the tracer</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">                                                                !! registry will use this memory, but it also means that any</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">                                                                !! updates to this structure in the calling module will be</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">                                                                !! available subsequently to the tracer registry.</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">pointer</span>, <span class="keywordtype">dimension(:,:,:)</span>, <span class="keywordtype">optional</span>     :: ad_x<span class="comment">         !&lt; diagnostic x-advective flux (CONC m3/s or CONC*kg/s)</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">pointer</span>, <span class="keywordtype">dimension(:,:,:)</span>, <span class="keywordtype">optional</span>     :: ad_y<span class="comment">         !&lt; diagnostic y-advective flux (CONC m3/s or CONC*kg/s)</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">pointer</span>, <span class="keywordtype">dimension(:,:,:)</span>, <span class="keywordtype">optional</span>     :: df_x<span class="comment">         !&lt; diagnostic x-diffusive flux (CONC m3/s or CONC*kg/s)</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">pointer</span>, <span class="keywordtype">dimension(:,:,:)</span>, <span class="keywordtype">optional</span>     :: df_y<span class="comment">         !&lt; diagnostic y-diffusive flux (CONC m3/s or CONC*kg/s)</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">intent(in)</span>,                <span class="keywordtype">optional</span>     :: obc_inflow<span class="comment">   !&lt; the tracer for all inflows via OBC for which OBC_in_u </span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">                                                                !! or OBC_in_v are not specified (units of tracer CONC)</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">pointer</span>, <span class="keywordtype">dimension(:,:,:)</span>, <span class="keywordtype">optional</span>     :: obc_in_u<span class="comment">     !&lt; tracer at inflows through u-faces of</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">                                                                !! tracer cells (units of tracer CONC) </span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">pointer</span>, <span class="keywordtype">dimension(:,:,:)</span>, <span class="keywordtype">optional</span>     :: obc_in_v<span class="comment">     !&lt; tracer at inflows through v-faces of</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">                                                                !! tracer cells (units of tracer CONC)</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;   </div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">dimension(:,:)</span>,   <span class="keywordtype">pointer</span>, <span class="keywordtype">optional</span>     :: ad_2d_x<span class="comment">      !&lt; vert sum of diagnostic x-advect flux (CONC m3/s or CONC*kg/s) </span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">dimension(:,:)</span>,   <span class="keywordtype">pointer</span>, <span class="keywordtype">optional</span>     :: ad_2d_y<span class="comment">      !&lt; vert sum of diagnostic y-advect flux (CONC m3/s or CONC*kg/s)</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">dimension(:,:)</span>,   <span class="keywordtype">pointer</span>, <span class="keywordtype">optional</span>     :: df_2d_x<span class="comment">      !&lt; vert sum of diagnostic x-diffuse flux (CONC m3/s or CONC*kg/s)  </span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">dimension(:,:)</span>,   <span class="keywordtype">pointer</span>, <span class="keywordtype">optional</span>     :: df_2d_y<span class="comment">      !&lt; vert sum of diagnostic y-diffuse flux (CONC m3/s or CONC*kg/s) </span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">pointer</span>, <span class="keywordtype">dimension(:,:,:)</span>, <span class="keywordtype">optional</span>     :: advection_xy<span class="comment"> !&lt; convergence of lateral advective tracer fluxes  </span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordtype">integer</span> :: ntr</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keywordtype">type</span>(tracer_type) :: temp</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordtype">character(len=256)</span> :: mesg    <span class="comment">! Message for error messages.</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keywordflow">if</span> (.not. <span class="keyword">associated</span>(reg)) <span class="keyword">call </span>tracer_registry_init(param_file, reg)</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordflow">if</span> (reg%ntr&gt;=max_fields_) <span class="keywordflow">then</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keyword">write</span>(mesg,<span class="stringliteral">&#39;(&quot;Increase MAX_FIELDS_ in MOM_memory.h to at least &quot;,I3,&quot; to allow for &amp;</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="stringliteral"></span><span class="stringliteral">        &amp;all the tracers being registered via register_tracer.&quot;)&#39;</span>) reg%ntr+1</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keyword">call </span>mom_error(fatal,<span class="stringliteral">&quot;MOM register_tracer: &quot;</span>//mesg)</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="keywordflow">  endif</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  reg%ntr = reg%ntr + 1</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  ntr     = reg%ntr</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(tr_desc_ptr)) <span class="keywordflow">then</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    reg%Tr(ntr)%vd =&gt; tr_desc_ptr</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keyword">allocate</span>(reg%Tr(ntr)%vd) ; reg%Tr(ntr)%vd = tr_desc</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="keywordflow">  endif</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keyword">call </span>query_vardesc(reg%Tr(ntr)%vd, name=reg%Tr(ntr)%name)</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordflow">if</span> (reg%locked) <span class="keyword">call </span>mom_error(fatal, &amp;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <span class="stringliteral">&quot;MOM register_tracer was called for variable &quot;</span>//trim(reg%Tr(ntr)%name)//&amp;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <span class="stringliteral">&quot; with a locked tracer registry.&quot;</span>)</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  reg%Tr(ntr)%t =&gt; tr1</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(ad_x)) <span class="keywordflow">then</span> ; <span class="keywordflow">if</span> (<span class="keyword">associated</span>(ad_x)) reg%Tr(ntr)%ad_x =&gt; ad_x ;<span class="keywordflow"> endif</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(ad_y)) <span class="keywordflow">then</span> ; <span class="keywordflow">if</span> (<span class="keyword">associated</span>(ad_y)) reg%Tr(ntr)%ad_y =&gt; ad_y ;<span class="keywordflow"> endif</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(df_x)) <span class="keywordflow">then</span> ; <span class="keywordflow">if</span> (<span class="keyword">associated</span>(df_x)) reg%Tr(ntr)%df_x =&gt; df_x ;<span class="keywordflow"> endif</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(df_y)) <span class="keywordflow">then</span> ; <span class="keywordflow">if</span> (<span class="keyword">associated</span>(df_y)) reg%Tr(ntr)%df_y =&gt; df_y ;<span class="keywordflow"> endif</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(obc_inflow)) reg%Tr(ntr)%OBC_inflow_conc = obc_inflow</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(obc_in_u)) <span class="keywordflow">then</span> ; <span class="keywordflow">if</span> (<span class="keyword">associated</span>(obc_in_u)) &amp;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                                    reg%Tr(ntr)%OBC_in_u =&gt; obc_in_u ;<span class="keywordflow"> endif</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(obc_in_v)) <span class="keywordflow">then</span> ; <span class="keywordflow">if</span> (<span class="keyword">associated</span>(obc_in_v)) &amp;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                                    reg%Tr(ntr)%OBC_in_v =&gt; obc_in_v ;<span class="keywordflow"> endif</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(ad_2d_x)) <span class="keywordflow">then</span> ; <span class="keywordflow">if</span> (<span class="keyword">associated</span>(ad_2d_x)) reg%Tr(ntr)%ad2d_x =&gt; ad_2d_x ;<span class="keywordflow"> endif</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(ad_2d_y)) <span class="keywordflow">then</span> ; <span class="keywordflow">if</span> (<span class="keyword">associated</span>(ad_2d_y)) reg%Tr(ntr)%ad2d_y =&gt; ad_2d_y ;<span class="keywordflow"> endif</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(df_2d_x)) <span class="keywordflow">then</span> ; <span class="keywordflow">if</span> (<span class="keyword">associated</span>(df_2d_x)) reg%Tr(ntr)%df2d_x =&gt; df_2d_x ;<span class="keywordflow"> endif</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(advection_xy)) <span class="keywordflow">then</span> ; <span class="keywordflow">if</span> (<span class="keyword">associated</span>(advection_xy)) reg%Tr(ntr)%advection_xy =&gt; advection_xy ;<span class="keywordflow"> endif</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div></div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d1/d35/namespacemom__tracer__registry_a6a753792521378d63e3dd5ca73f3574a_cgraph.svg" width="100%" height="397"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="aaca7f6bcdb5f1d8cb247e24719d37df9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaca7f6bcdb5f1d8cb247e24719d37df9">&sect;&nbsp;</a></span>tracer_registry_end()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public mom_tracer_registry::tracer_registry_end </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="../../df/df4/structmom__tracer__registry_1_1tracer__registry__type.html">tracer_registry_type</a>), pointer&#160;</td>
          <td class="paramname"><em>Reg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This routine closes the tracer registry module. </p>

<p>Definition at line <a class="el" href="../../d9/d8f/MOM__tracer__registry_8F90_source.html#l00295">295</a> of file <a class="el" href="../../d9/d8f/MOM__tracer__registry_8F90_source.html">MOM_tracer_registry.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="keywordtype">type</span>(tracer_registry_type), <span class="keywordtype">pointer</span> :: reg</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">associated</span>(reg)) <span class="keyword">deallocate</span>(reg)</div></div><!-- fragment -->
</div>
</div>
<a id="a452937bf1f9d01a47d1a80793e317b33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a452937bf1f9d01a47d1a80793e317b33">&sect;&nbsp;</a></span>tracer_registry_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public mom_tracer_registry::tracer_registry_init </td>
          <td>(</td>
          <td class="paramtype">type(param_file_type), intent(in)&#160;</td>
          <td class="paramname"><em>param_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="../../df/df4/structmom__tracer__registry_1_1tracer__registry__type.html">tracer_registry_type</a>), pointer&#160;</td>
          <td class="paramname"><em>Reg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This routine include declares and sets the variable "version". </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">param_file</td><td>open file to parse for model parameters</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">reg</td><td>pointer to tracer registry </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d9/d8f/MOM__tracer__registry_8F90_source.html#l00268">268</a> of file <a class="el" href="../../d9/d8f/MOM__tracer__registry_8F90_source.html">MOM_tracer_registry.F90</a>.</p>

<p>References <a class="el" href="../../d5/d48/MOM__error__handler_8F90_source.html#l00048">mom_error_handler::is_root_pe()</a>, and <a class="el" href="../../d5/d48/MOM__error__handler_8F90_source.html#l00072">mom_error_handler::mom_error()</a>.</p>

<p>Referenced by <a class="el" href="../../d9/d8f/MOM__tracer__registry_8F90_source.html#l00079">register_tracer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="keywordtype">type</span>(param_file_type),      <span class="keywordtype">intent(in)</span> :: param_file<span class="comment"> !&lt; open file to parse for model parameters</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordtype">type</span>(tracer_registry_type), <span class="keywordtype">pointer</span>    :: reg<span class="comment">        !&lt; pointer to tracer registry </span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keywordtype">integer</span>, <span class="keywordtype">save</span> :: init_calls = 0</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="preprocessor">#include &quot;version_variable.h&quot;</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="preprocessor"></span>  <span class="keywordtype">character(len=40)</span>  :: mod = <span class="stringliteral">&quot;MOM_tracer_registry&quot;</span> <span class="comment">! This module&#39;s name.</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="keywordtype">character(len=256)</span> :: mesg    <span class="comment">! Message for error messages.</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keywordflow">if</span> (.not.<span class="keyword">associated</span>(reg)) <span class="keywordflow">then</span> ; <span class="keyword">allocate</span>(reg)</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keywordflow">else</span> ; <span class="keywordflow">return</span> ;<span class="keywordflow"> endif</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="comment">! Read all relevant parameters and write them to the model log.</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="keyword">call </span>log_version(param_file, mod, version, <span class="stringliteral">&quot;&quot;</span>)</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  init_calls = init_calls + 1</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="keywordflow">if</span> (init_calls &gt; 1) <span class="keywordflow">then</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keyword">write</span>(mesg,<span class="stringliteral">&#39;(&quot;tracer_registry_init called &quot;,I3, &amp;</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="stringliteral"></span><span class="stringliteral">      &amp;&quot; times with different registry pointers.&quot;)&#39;</span>) init_calls</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">if</span> (is_root_pe()) <span class="keyword">call </span>mom_error(warning,<span class="stringliteral">&quot;MOM_tracer&quot;</span>//mesg)</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="keywordflow">  endif</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div></div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d1/d35/namespacemom__tracer__registry_a452937bf1f9d01a47d1a80793e317b33_cgraph.svg" width="531" height="82"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d1/d35/namespacemom__tracer__registry_a452937bf1f9d01a47d1a80793e317b33_icgraph.svg" width="342" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d1/d35/namespacemom__tracer__registry.html">mom_tracer_registry</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
